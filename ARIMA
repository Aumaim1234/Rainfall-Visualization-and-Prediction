from dateutil.parser import parse
import matplotlib as mpl
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np
import pandas as pd
import statsmodels.formula.api as smf
import statsmodels.api as sm
import matplotlib.pyplot as plt
from datetime import datetime
from statsmodels.tsa.stattools import adfuller
from sklearn.metrics import mean_squared_error

#add data file
df = pd.read_csv('/content/sample_data/rainfall2-transpost.csv')
print('Shape of data',df.shape)
df=df.set_index(['Year'])

from statsmodels.tsa.stattools import acf, pacf
thAcf = acf(df['Ubon Ratchathani'], nlags=4)
thPacf = pacf(df['Ubon Ratchathani'], nlags=4, method='ols')

#stationary test#
from statsmodels.tsa.stattools import adfuller
def adf_test(df):
     dftest = adfuller(df, autolag = 'AIC')
     print("1. ADF : ",dftest[0])
     print("2. P-Value : ", dftest[1])
     print("3. Num Of Lags : ", dftest[2])
     print("4. Num Of Observations Used For ADF Regression:",      dftest[3])
     print("5. Critical Values :")
     for key, val in dftest[4].items():
         print("\t",key, ": ", val)
province=list()
for i in range(len(df.columns)):
  P=adf_test(df.iloc[:,i])
  if P<0.05:
    province.append(i)
print(province)   
# p <0.05; data stationary
# p> 0.05; data non-stationary

